let e=JSON.parse(localStorage.getItem("sigmaMarketExtConfig"))||{noDelay:!1,autoAmount:!1,autoAmountValue:0},t={firebaseApp:null,firestoreDB:null};function n(){localStorage.setItem("sigmaMarketExtConfig",JSON.stringify(e))}function o(){return JSON.parse(localStorage.getItem("playerdata"))}function a(e){document.querySelector("#spinCode").value=e}function i(){e.autoAmount>0&&a((o().balance*e.autoAmountValue/100).toFixed(0))}async function c(e,n){const o=t.firestoreFunctions.doc(t.firestoreDB,"playerdata",e),a=(await t.firestoreFunctions.getDocs(t.firestoreFunctions.collection(t.firestoreDB,"playerdata"))).docs.map(e=>({id:e.id,...e.data()}));console.log(a),await t.firestoreFunctions.updateDoc(o,{balance:n})}async function r(){const e=document.querySelector("#userDataBody"),n=(await t.firestoreFunctions.getDocs(t.firestoreFunctions.collection(t.firestoreDB,"playerdata"))).docs.map(e=>({id:e.id,...e.data()}));console.log(n),n.forEach(t=>{const n=document.createElement("tr");e.appendChild(n);const o=document.createElement("td");o.textContent=t.id,n.appendChild(o);const a=document.createElement("td");a.textContent=t.pin,n.appendChild(a);const i=document.createElement("input");i.style="background-color: #000; color: #fff; border-radius: 8px; width: 100px; margin-left: 10px;",i.type="number",i.value=t.balance,i.addEventListener("change",function(){console.log(this.value),c(t.id,parseInt(this.value,10)||0)}),n.appendChild(i)})}document.querySelector("#spin").addEventListener("click",function(){e.noDelay&&(this.disabled=!1),i()});const l=window.setTimeout;window.setTimeout=(t,n,...o)=>{n||(n=0),n=function(t,n){return 2e3!=n&&200!=n||!e.noDelay||(n=0),5e3==n&&(n=500),600==n&&(n=100),i(),n}(t,n,...o);const a=l(t,n,...o);return console.log(`Set timeout with id ${a}, timeout ${n}ms, handler ${t.name||"anonymous"}`),a},(async()=>{const{initializeApp:e}=await import("https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"),{getFirestore:n,collection:o,doc:a,getDoc:i,setDoc:c,updateDoc:r,runTransaction:l,query:d,onSnapshot:s,serverTimestamp:u,deleteDoc:p,getDocs:m,increment:y}=await import("https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"),h=e({apiKey:"AIzaSyC0Ojzt2HxZzTwmUZsX9ZEZ31NiyNqo6B8",authDomain:"sigma-market-app.firebaseapp.com",projectId:"sigma-market-app",storageBucket:"sigma-market-app.appspot.com",messagingSenderId:"1042846633134",appId:"1:1042846633134:web:ef61598314d0987ec6713f",measurementId:"G-WG84HP2QDH"}),f=n(h);t.firebaseApp=h,t.firestoreDB=f,t.firestoreFunctions={collection:o,doc:a,getDoc:i,setDoc:c,updateDoc:r,runTransaction:l,query:d,onSnapshot:s,serverTimestamp:u,deleteDoc:p,getDocs:m,increment:y},console.log("Firebase initialized"),console.log("app",h),console.log("db",f)})(),function(){const r=document.querySelector("#gameBox > div:nth-child(7)"),l=document.createElement("div");l.style="display: flex; flex-direction: column;";const d=document.createElement("p");d.style="font-size:28px; font-weight:200; display:block !important; width:280px;",d.textContent="Extra Config",l.appendChild(d);const s=document.createElement("button");s.style="border-radius: 8px;",s.textContent="No Spin Delay: "+(e.noDelay?"ON":"OFF"),s.addEventListener("click",function(){e.noDelay=!e.noDelay,n(),s.textContent="No Spin Delay: "+(e.noDelay?"ON":"OFF")}),l.appendChild(s);const u=document.createElement("div");u.style="display: flex; flex-direction: row; align-items: center;",l.appendChild(u);const p=document.createElement("input");p.type="number",p.style="border-radius: 8px; width: 100px; margin-left: 10px;",p.placeholder="Enter percentage",p.value=e.autoAmountValue||0,p.addEventListener("change",function(){e.autoAmountValue=parseInt(this.value,10)||0,this.parentElement.querySelector("button").textContent="Auto Set Amount "+(e.autoAmount?e.autoAmountValue+"%":"OFF"),i(),n()}),u.appendChild(p);const m=document.createElement("button");m.style="margin-bottom:0;",m.textContent="Auto Set Amount "+(e.autoAmount?e.autoAmountValue+"%":"OFF"),m.addEventListener("click",function(){e.autoAmount=!e.autoAmount,this.textContent="Auto Set Amount "+(e.autoAmount?e.autoAmountValue+"%":"OFF"),i(),n()}),u.appendChild(m);const y=document.createElement("button");y.style="margin-top:10px;",y.textContent="Get Jackpot",y.addEventListener("click",async function(){a(o().balance);const e=Math.random;Math.random=()=>.9999999,document.querySelector("#spin").click(),await new Promise(e=>setTimeout(e,50)),Math.random=e}),l.appendChild(y),r.appendChild(l);const h=document.createElement("div");h.style="display: flex; flex-direction: row; align-items: center;",l.appendChild(h);const f=document.createElement("input");f.type="text",f.style="border-radius: 8px; width: 150px; margin-right: 10px;",f.placeholder="Enter username",f.value="",h.appendChild(f);const g=document.createElement("input");g.type="number",g.style="border-radius: 8px; width: 100px; margin-right: 10px;",g.placeholder="Enter balance",g.value=0,h.appendChild(g);const x=document.createElement("button");x.style="",x.textContent="Set Balance",x.addEventListener("click",async function(){await c(this.parentElement.querySelector("input[type='text']").value,parseInt(this.parentElement.querySelector("input[type='number']").value,10)||0)}),h.appendChild(x);const C=document.createElement("div");C.style="display: flex; flex-direction: row; align-items: center;",l.appendChild(C);const E=document.createElement("input");E.type="number",E.step="0.001",E.style="border-radius: 8px; width: 100px; margin-right: 10px;",E.placeholder="Enter boost",E.value=0,C.appendChild(E);const b=document.createElement("button");b.style="",b.textContent="Set Global Boost",b.addEventListener("click",async function(){await async function(e){const n=t.firestoreFunctions.doc(t.firestoreDB,"server","boost");await t.firestoreFunctions.updateDoc(n,{boost:e,lastUpdated:Date.now()})}(parseFloat(this.parentElement.querySelector("input[type='number']").value))}),C.appendChild(b);const w=document.createElement("style");w.innerHTML="body > div{display:none !important;}",document.head.appendChild(w),setTimeout(function(){const e=window.confetti;window.confetti=function(t){return e(function(e){return e.particleCount&&(e.particleCount=20),e}(t))}},100)}(),function(){const e=document.querySelector("#gameBox > div:nth-child(7)"),t=document.createElement("div");t.style="display: flex; flex-direction: column;",e.appendChild(t);const n=document.createElement("p");n.style="font-size:28px; font-weight:200; display:block !important; width:280px;",n.textContent="User Data",t.appendChild(n);const o=document.createElement("table");o.style="width: 100%; border-collapse: collapse;",t.appendChild(o);const a=document.createElement("thead");a.addEventListener("click",function(){const e=document.querySelector("#userDataBody");"none"===e.style.display?e.style.display="table-row-group":e.style.display="none"}),o.appendChild(a);const i=document.createElement("tr");a.appendChild(i);const c=document.createElement("th");c.textContent="Username",i.appendChild(c);const l=document.createElement("th");l.textContent="Pin",i.appendChild(l);const d=document.createElement("th");d.textContent="Balance",i.appendChild(d);const s=document.createElement("tbody");s.id="userDataBody",s.style="display: none;",o.appendChild(s),setTimeout(r,1e3)}(),i();
